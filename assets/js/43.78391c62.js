(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{277:function(a,s,t){"use strict";t.r(s);var n=t(0),e=Object(n.a)({},function(){var a=this,s=a.$createElement,t=a._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h2",{attrs:{id:"looper-类的作用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#looper-类的作用","aria-hidden":"true"}},[a._v("#")]),a._v(" Looper 类的作用")]),a._v(" "),t("p",[a._v("将一个普通线程转换为循环线程")]),a._v(" "),t("p",[a._v("一个线程中只能有一个 Looper 对象，对应一个消息队列")]),a._v(" "),t("p",[a._v("如何将普通线程变为 Looper 线程")]),a._v(" "),t("p",[a._v("1,编写自定义的线程类，继承 Thread 类")]),a._v(" "),t("p",[a._v("2,重写 run 方法")]),a._v(" "),t("p",[a._v("1)在 run 方法开始的时候调用 Looper.prepare();")]),a._v(" "),t("p",[a._v("实例化Handler对象")]),a._v(" "),t("p",[a._v("2)在 run 方法结束的时候调用 Looper.loop() 将该线程加入到循环中")]),a._v(" "),t("h2",{attrs:{id:"handler-使用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#handler-使用","aria-hidden":"true"}},[a._v("#")]),a._v(" handler 使用")]),a._v(" "),t("p",[a._v("主要作用：处理线程与线程之间的通信消息")]),a._v(" "),t("p",[a._v("要和谁通信就要使用谁的 Handler 对象进行发送消息")]),a._v(" "),t("p",[a._v("一个线程中可以有多个 Handler")]),a._v(" "),t("p",[a._v("Handler 在哪里实例化，那么它就与哪个线程 Looper 绑定")]),a._v(" "),t("p",[a._v("使用步骤：")]),a._v(" "),t("p",[a._v("1，在相应的线程位置实例化 Handler 对象")]),a._v(" "),t("p",[a._v("2，重写 HandlMessage()")]),a._v(" "),t("p",[a._v("3，发送消息")]),a._v(" "),t("p",[a._v("使用相应的 Handler 进行发送消息")]),a._v(" "),t("div",{staticClass:"language-java extra-class"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Message")]),a._v(" msg "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("new")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Message")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("   \nhandler"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("sendMessage")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("msg"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Message")]),a._v(" msg "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" handler"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("obtinMessage")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\nmsg"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("sendtotarget")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])])]),t("h2",{attrs:{id:"任务调度"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#任务调度","aria-hidden":"true"}},[a._v("#")]),a._v(" 任务调度")]),a._v(" "),t("p",[a._v("1，声明变量")]),a._v(" "),t("div",{staticClass:"language-java extra-class"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Timer")]),a._v(" timer "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("new")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Timer")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("MyTimeTask")]),a._v(" task "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("new")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("MyTimeTask")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])])]),t("p",[a._v("2,编写自定义 MyTimerTask 继承 TimerTask")]),a._v(" "),t("p",[a._v("3，重写run方法")]),a._v(" "),t("p",[a._v("4，在onCreate()方法中，进行任务调度")]),a._v(" "),t("div",{staticClass:"language-java extra-class"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[a._v("timer"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("schedule")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("task"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1000")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v(" \n")])])]),t("p",[a._v("5,在点击事件更新了 max 的值")])])},[],!1,null,null,null);s.default=e.exports}}]);