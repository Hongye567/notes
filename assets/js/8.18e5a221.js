(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{246:function(t,s,a){t.exports=a.p+"assets/img/css-grid@2x.e3489c81.png"},247:function(t,s,a){t.exports=a.p+"assets/img/rpx-error@2x.95df81ee.png"},248:function(t,s,a){t.exports=a.p+"assets/img/rpx-fixed@2x.388b300d.png"},380:function(t,s,a){"use strict";a.r(s);var n=a(0),e=Object(n.a)({},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"小程序使用-rpx-存在像素差（实战篇）"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#小程序使用-rpx-存在像素差（实战篇）","aria-hidden":"true"}},[t._v("#")]),t._v(" 小程序使用 rpx 存在像素差（实战篇）")]),t._v(" "),n("p",[t._v("在小程序中我想实现如下表格布局效果。第一个单元格纵向占两格高度，由于小程序不存在 table 元素，只能自己通过样式实现。")]),t._v(" "),n("img",{staticStyle:{zoom:"30%"},attrs:{src:a(246),alt:"css-grid@2x"}}),t._v(" "),n("p",[t._v("我的实现方式是")]),t._v(" "),n("div",{staticClass:"language-css extra-class"},[n("pre",{pre:!0,attrs:{class:"language-css"}},[n("code",[n("span",{pre:!0,attrs:{class:"token selector"}},[t._v(".cell")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("height")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 88rpx"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* 每个单元格固定高度 */")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("float")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" left"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token selector"}},[t._v(".cell:first-child")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("height")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 176rpx"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("这样写在 iPhone5 就会存在如下问题，"),n("code",[t._v("176rpx != 88rpx * 2")]),t._v("。")]),t._v(" "),n("img",{staticStyle:{zoom:"30%"},attrs:{src:a(247),alt:"rpx-error@2x"}}),t._v(" "),n("p",[t._v("为什么会出现这种情况，小程序屏幕宽固定为 750rpx，就是把屏幕宽分成 750份，每份就是 1rpx。当屏幕宽（像素）不能被 750 整除时，小程序做了取整操作。")]),t._v(" "),n("div",{staticClass:"language-css extra-class"},[n("pre",{pre:!0,attrs:{class:"language-css"}},[n("code",[n("span",{pre:!0,attrs:{class:"token selector"}},[t._v(".cell")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("height")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 88rpx"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*\n  iPhone5 宽 320px\n  88rpx = 320px / 750 * 88 = 37.5466666667px \n  取整\n  88rpx = 37px，最终效果为 37px\n  */")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token selector"}},[t._v(".cell:first-child")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("height")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 176rpx"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*\n  176rpx = 320px / 750 * 176 = 75.0933333333px\n  取整\n  176rpx = 75px，最终效果为 75px\n  明显 75px != 37px * 2，然后就遇到了上述问题\n  */")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[n("strong",[t._v("解决方案")])]),t._v(" "),n("p",[t._v("使用 "),n("code",[t._v("calc()")])]),t._v(" "),n("div",{staticClass:"language-diff extra-class"},[n("pre",{pre:!0,attrs:{class:"language-diff"}},[n("code",[t._v(".cell:first-child {\n"),n("span",{pre:!0,attrs:{class:"token deleted"}},[t._v("-  height: 176rpx;")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token inserted"}},[t._v("+  height: calc(88rpx * 2);")]),t._v("\n}\n")])])]),n("p",[t._v("这样小程序在编译时会先将 88rpx 转换为 px，然后再乘以 2，这样就会保证是 2倍关系了。")]),t._v(" "),n("img",{staticStyle:{zoom:"30%"},attrs:{src:a(248),alt:"rpx-fixed@2x"}}),t._v(" "),n("p",[n("a",{attrs:{href:"https://github.com/Honye/weapp-mark/commit/b64eb4460b75841c1d77bc13bc1fc816a32abf59",target:"_blank",rel:"noopener noreferrer"}},[t._v("完整源码"),n("OutboundLink")],1)]),t._v(" "),n("p",[t._v("若只是想单纯实现上述网格布局，也可使用 CSS grid 实现，可"),n("a",{attrs:{href:"https://github.com/Honye/weapp-mark/commit/36c6e45459b728a9de237a50f8a20f228ab65402",target:"_blank",rel:"noopener noreferrer"}},[t._v("参考源码"),n("OutboundLink")],1)])])},[],!1,null,null,null);s.default=e.exports}}]);